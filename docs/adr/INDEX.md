# ADR Index

| #                                                          | Title                                          | Status   | Date        | Summary                                                                                                                   |
| ---------------------------------------------------------- | ---------------------------------------------- | -------- | ----------- | ------------------------------------------------------------------------------------------------------------------------- |
| [0001](0001-digest-scripts-token-optimization.md)          | Digest Scripts for Token Optimization          | Accepted | 31 Jan 2026 | Replace verbose CLI output with compact JSON digest scripts to reduce token waste.                                        |
| [0002](0002-inter-wave-communication.md)                   | Inter-Wave Communication                       | Accepted | 01 Feb 2026 | Add output_data, executor_agent, and precondition columns for structured inter-wave data passing.                         |
| [0003](0003-opus46-configuration-upgrade.md)               | Opus 4.6 Configuration Upgrade                 | Accepted | 07 Feb 2026 | Upgrade to Claude Opus 4.6 with 128K output tokens and adaptive thinking mode.                                            |
| [0004](0004-distributed-plan-execution.md)                 | Distributed Plan Execution                     | Accepted | 07 Feb 2026 | Enable plan execution across multiple machines with atomic claim protocol and host attribution.                           |
| [0005](0005-multi-agent-concurrency-control.md)            | Multi-Agent Concurrency Control                | Accepted | 09 Feb 2026 | Four-layer system (wave overlap detection, file locking, stale checks, merge queue) to prevent concurrent edit conflicts. |
| [0006](0006-system-stability-crash-prevention.md)          | System Stability and Crash Prevention          | Accepted | 09 Feb 2026 | Defender exclusions, caffeinate limits, and session reaper to prevent overnight CPU-induced system crashes.               |
| [0007](0007-claude-md-restructuring.md)                    | CLAUDE.md Restructuring                        | Accepted | 12 Feb 2026 | Slim CLAUDE.md by 42% by extracting operational details to reference files with lazy loading.                             |
| [0008](0008-thor-per-task-validation-constitution-gate.md) | Thor Per-Task Validation & Constitution Gate   | Accepted | 15 Feb 2026 | Shift Thor validation from wave-level batch to per-task immediate feedback with CLAUDE.md compliance gate.                |
| [0009](0009-compact-markdown-format.md)                    | Compact Markdown Format for LLM Instructions   | Accepted | 15 Feb 2026 | Apply token-aware writing rules to all agent-produced text: tables over prose, commands over descriptions.                |
| [0010](0010-multi-provider-orchestration.md)               | Multi-Provider Orchestration                   | Accepted | 21 Feb 2026 | Centralize provider routing via delegate.sh with privacy-aware selection across Copilot, Gemini, and OpenCode.            |
| [0011](0011-anti-bypass-protocol.md)                       | Anti-Bypass Protocol                           | Accepted | 21 Feb 2026 | Enforce task-executor for all plan file edits via hooks; block EnterPlanMode and direct edits during plans.               |
| [0012](0012-token-accounting.md)                           | Token Accounting & Cost Attribution            | Accepted | 21 Feb 2026 | Mandatory token reporting via API per task-executor with per-plan/wave/task cost attribution.                             |
| [0013](0013-worktree-isolation.md)                         | Worktree Isolation Protocol                    | Accepted | 21 Feb 2026 | One worktree per plan/wave; task-executors work in isolated branches; merge is proof of completion.                       |
| [0014](0014-zsh-shell-safety.md)                           | zsh Shell Safety Constraints                   | Accepted | 21 Feb 2026 | Ban !=, require set -euo pipefail, quote all variables, and avoid head/tail pipes in zsh scripts.                         |
| [0015](0015-agents-md-cross-tool.md)                       | AGENTS.md Cross-Tool Standard                  | Accepted | 21 Feb 2026 | Single AGENTS.md at repo root provides consistent instructions for Claude Code, Copilot CLI, Codex, and Gemini.           |
| [0016](0016-session-file-locking.md)                       | Session-Based File Locking                     | Accepted | 19 Feb 2026 | Automatic PreToolUse hooks acquire session-level file locks for all writes outside formal plan tasks.                     |
| [0017](0017-codegraph-mcp-only.md)                         | CodeGraph MCP-Only, No CLI                     | Accepted | 21 Feb 2026 | CodeGraph runs exclusively as MCP server; no CLI binary, no fallback, no hybrid mode.                                     |
| [0018](0018-memory-protocol.md)                            | Memory Protocol                                | Accepted | 21 Feb 2026 | Hierarchical file-based memory (session/project/global/team) for cross-session agent context persistence.                 |
| [0019](0019-plan-intelligence-system.md)                   | Plan Intelligence System                       | Accepted | 24 Feb 2026 | Five-component system for pre-execution review, post-mortem capture, and ROI tracking on plans.                           |
| [0020](0020-ecosystem-modernization-v2.1.md)               | Ecosystem Modernization for Claude Code v2.1.x | Accepted | 27 Feb 2026 | Adopt Agent Teams, LSP tool, native worktree isolation, wildcard permissions, and Copilot CLI GA features.                |
| [0021](0021-serialization-format-policy.md)                | Serialization Format Policy (JSON vs YAML)     | Accepted | 27 Feb 2026 | YAML for human-authored plan specs; JSON for all digest/script output — each format for its natural use case.             |
| [0022](0022-session-reaper-orphan-cleanup.md)              | Session Reaper — Orphan Process Cleanup        | Accepted | 27 Feb 2026 | Three-layer defense (Stop hook, sessionEnd hook, launchd timer) to kill orphaned AI agent shell processes.                |
| [0023](0023-spotlight-exclusion-policy.md)                 | Spotlight Exclusion Policy                     | Accepted | 27 Feb 2026 | Exclude ~/GitHub and ~/.claude from Spotlight indexing — zero value, saves battery and CPU.                               |
| [0024](0024-overlapping-wave-execution.md)                 | Overlapping Wave Execution Protocol            | Accepted | 27 Feb 2026 | Non-blocking wave transitions via merge-async + pr-sync + feedback injection. Saves 20-60 min per wave.                  |
